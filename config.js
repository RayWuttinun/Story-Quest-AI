// Configuration
const CONFIG = {
    AI_API_URL: 'http://127.0.0.1:1234/v1',
    MODEL_NAME: 'openai/gpt-oss-20b',
    MAX_RETRIES: 3,
    RETRY_DELAY: 1000
};

// Story Categories
const STORY_CATEGORIES = {
    animals: {
        name: "ü¶ä ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå",
        description: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå",
        color: "linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",
        themes: ["‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏â‡∏•‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå", "‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏õ‡πà‡∏≤", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡∏±‡∏ö‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå"],
        prompts: {
            story: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏™‡∏±‡πâ‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏¥‡∏î‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö {theme} ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 100-150 ‡∏Ñ‡∏≥ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢",
            question: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏ô‡∏µ‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡∏Ç‡πâ‡∏≠ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏¥‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ"
        }
    },
    moral: {
        name: "üßö ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏Ñ‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°",
        description: "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏î‡∏µ‡πÜ ‡∏™‡∏≠‡∏ô‡πÉ‡∏à",
        color: "linear-gradient(135deg, #fa709a 0%, #fee140 100%)",
        themes: ["‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ï‡∏¢‡πå", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏ï‡∏ï‡∏≤", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏¢‡∏±‡∏ô", "‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏∑‡πâ‡∏≠‡πÄ‡∏ü‡∏∑‡πâ‡∏≠"],
        prompts: {
            story: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏Ñ‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö {theme} ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 100-150 ‡∏Ñ‡∏≥ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢",
            question: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ï‡∏¥‡∏ò‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏ô‡∏µ‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡∏Ç‡πâ‡∏≠ ‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ"
        }
    },
    wisdom: {
        name: "ü¶â ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏ç‡∏≤",
        description: "‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤",
        color: "linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",
        themes: ["‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå", "‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô", "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"],
        prompts: {
            story: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ {theme} ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 100-150 ‡∏Ñ‡∏≥ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢",
            question: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡∏≤‡∏Å‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡∏Ç‡πâ‡∏≠ ‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏¥‡∏î"
        }
    },
    friendship: {
        name: "üë´ ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û",
        description: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û‡πÅ‡∏ó‡πâ",
        color: "linear-gradient(135deg, #f5576c 0%, #f093fb 100%)",
        themes: ["‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏†‡∏±‡∏¢", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à", "‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô"],
        prompts: {
            story: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡πÅ‡∏á‡πà‡∏°‡∏∏‡∏° {theme} ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 100-150 ‡∏Ñ‡∏≥ ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢",
            question: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 4 ‡∏Ç‡πâ‡∏≠ ‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏¥‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏†‡∏≤‡∏û"
        }
    }
};

// Fallback stories (‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°)
const FALLBACK_STORIES = {
    animals: [
        {
            story: {
                title: "‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡πÄ‡∏ï‡πà‡∏≤",
                content: "‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å ‡∏°‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏≠‡∏ß‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡∏ó‡πâ‡∏≤‡πÅ‡∏Ç‡πà‡∏á‡∏ß‡∏¥‡πà‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏ï‡πà‡∏≤ ‡πÄ‡∏ï‡πà‡∏≤‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ó‡πâ‡∏≤ ‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡πà‡∏á‡∏ô‡∏≥‡πÑ‡∏õ‡πÑ‡∏Å‡∏• ‡πÅ‡∏ï‡πà‡∏°‡∏±‡∏ô‡∏ô‡∏≠‡∏ô‡∏û‡∏±‡∏Å‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏ä‡∏ô‡∏∞‡πÅ‡∏ô‡πà ‡πÄ‡∏ï‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏ï‡πà‡∏≤‡∏ä‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô"
            },
            question: "‡πÄ‡∏ï‡πà‡∏≤‡∏ä‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
            options: ["‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢", "‡πÑ‡∏°‡πà‡∏¢‡πà‡∏≠‡∏ó‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô", "‡πÇ‡∏Å‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á", "‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢‡∏ñ‡∏≠‡∏ô‡∏ï‡∏±‡∏ß"],
            correct: 1,
            moral: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏¢‡πà‡∏≠‡∏ó‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ"
        }
    ]
};